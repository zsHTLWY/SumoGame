<DOCTYPE! html>
<html>
<body>

<div id="Player" style="width: 50px; height: 50px; background-color: red; position: fixed;"></div>

<script>
    const player = document.getElementById("Player");
    const playerSpeed = 40;

    let playerX = window.innerWidth / 2 - 10;
    let playerY = window.innerHeight / 2 - 10;

    player.style.top = playerY + "px";
    player.style.left = playerX + "px";

    const keysPressed = {};

    window.addEventListener("keydown", function(event) {
        keysPressed[event.key.toLowerCase()] = true;
        movePlayer();
    });

    window.addEventListener("keyup", function(event) {
        keysPressed[event.key.toLowerCase()] = false;
    });

    function movePlayer() {
        if (keysPressed["w"]) {
            playerY -= playerSpeed;
        }
        if (keysPressed["s"]) {
            playerY += playerSpeed;
        }
        if (keysPressed["a"]) {
            playerX -= playerSpeed;
        }
        if (keysPressed["d"]) {
            playerX += playerSpeed;
        }

        player.style.top = playerY + "px";
        player.style.left = playerX + "px";
		
		var xhttp = new XMLHttpRequest();
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.status == 200) {
			   // Typical action to be performed when the document is ready:
			   document.getElementById("demo").innerHTML = xhttp.responseText;
			}
		};
		xhttp.open("GET", "http://localhost:3000/player1?x=" + playerX + "&y=" + playerY, true);
		xhttp.send();
    }

</script>
</body>
</html>
